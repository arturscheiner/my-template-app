<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ux_data_broker_transform">
    <sys_ux_data_broker_transform action="DELETE">
        <acl_failure_result/>
        <api_name>x_1434439_my_tem_0.Community Alerts</api_name>
        <description/>
        <mutates_server_data>false</mutates_server_data>
        <name>Community Alerts</name>
        <output_schema/>
        <private>false</private>
        <props/>
        <required_translations>[ ]</required_translations>
        <schema_version>1.0.0</schema_version>
        <script><![CDATA[function transform() {

    var data = [];
    var icon = {
        "emergency_information": "circle-exclamation-outline",
        "community_update": "megaphone-outline"
    };
	var month = {
		"1":"January",
		"2":"February",
		"3":"March",
		"4":"April",
		"5":"May",
		"6":"June",
		"7":"July",
		"8":"August",
		"9":"September",
		"10":"October",
		"11":"November",
		"12":"December"
	};
    var communityAlert = new GlideRecord('x_1434439_my_tem_0_emergency_alert');
    communityAlert.addActiveQuery();
    communityAlert.query();
    while (communityAlert.next()) {

        var date = new GlideDateTime(communityAlert.sys_created_on).getDisplayValue();
        var alert = {};
        var title = {};
        var fields = [];
        title.label = gs.getMessage("{0}",communityAlert['emergency_alert_title'].toString());
        title.opensWindow = 'false';
		title.href=[gs.getProperty('glide.servlet.uri'),'x/1434439/x_1434439_my_tem_0/portal/emergency-information/x_1434439_my_tem_0_emergency_alert/',communityAlert.sys_id,'/',communityAlert.kb_article].join('');
        fields.push({
            "text": gs.getMessage("{0}",communityAlert.getDisplayValue('type')),
            "type": "string"
        });
        fields.push({
            "text": date.split(' ')[0].toString(),
            "type": "string"
        });
        alert.icon = icon[communityAlert['type'].toString()];
        alert.title = title;
        alert.fields = fields;
        data.push(alert);
    }

    return data;
}]]></script>
        <sys_class_name>sys_ux_data_broker_transform</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-05-29 17:32:20</sys_created_on>
        <sys_id>5f32a25c7122021024191a38e3b7e1bb</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Community Alerts</sys_name>
        <sys_package display_value="My Template App" source="x_1434439_my_tem_0">7232625c53220210d9568cfbe92e8074</sys_package>
        <sys_policy/>
        <sys_scope display_value="My Template App">7232625c53220210d9568cfbe92e8074</sys_scope>
        <sys_update_name>sys_ux_data_broker_transform_5f32a25c7122021024191a38e3b7e1bb</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-05-29 17:32:20</sys_updated_on>
    </sys_ux_data_broker_transform>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="My Template App">7232625c53220210d9568cfbe92e8074</application>
        <file_path/>
        <instance_id>7d047f93db61869837d72a59139619a9</instance_id>
        <instance_name>dev260498</instance_name>
        <name>sys_ux_data_broker_transform_5f32a25c7122021024191a38e3b7e1bb</name>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ux_data_broker_transform"&gt;&lt;sys_ux_data_broker_transform action="INSERT_OR_UPDATE"&gt;&lt;acl_failure_result/&gt;&lt;api_name&gt;x_1434439_my_tem_0.Community Alerts&lt;/api_name&gt;&lt;description/&gt;&lt;mutates_server_data&gt;false&lt;/mutates_server_data&gt;&lt;name&gt;Community Alerts&lt;/name&gt;&lt;output_schema/&gt;&lt;private&gt;false&lt;/private&gt;&lt;props/&gt;&lt;required_translations&gt;[ ]&lt;/required_translations&gt;&lt;schema_version&gt;1.0.0&lt;/schema_version&gt;&lt;script&gt;&lt;![CDATA[function transform() {

    var data = [];
    var icon = {
        "emergency_information": "circle-exclamation-outline",
        "community_update": "megaphone-outline"
    };
	var month = {
		"1":"January",
		"2":"February",
		"3":"March",
		"4":"April",
		"5":"May",
		"6":"June",
		"7":"July",
		"8":"August",
		"9":"September",
		"10":"October",
		"11":"November",
		"12":"December"
	};
    var communityAlert = new GlideRecord('x_1434439_my_tem_0_emergency_alert');
    communityAlert.addActiveQuery();
    communityAlert.query();
    while (communityAlert.next()) {

        var date = new GlideDateTime(communityAlert.sys_created_on).getDisplayValue();
        var alert = {};
        var title = {};
        var fields = [];
        title.label = gs.getMessage("{0}",communityAlert['emergency_alert_title'].toString());
        title.opensWindow = 'false';
		title.href=[gs.getProperty('glide.servlet.uri'),'x/1434439/x_1434439_my_tem_0/portal/emergency-information/x_1434439_my_tem_0_emergency_alert/',communityAlert.sys_id,'/',communityAlert.kb_article].join('');
        fields.push({
            "text": gs.getMessage("{0}",communityAlert.getDisplayValue('type')),
            "type": "string"
        });
        fields.push({
            "text": date.split(' ')[0].toString(),
            "type": "string"
        });
        alert.icon = icon[communityAlert['type'].toString()];
        alert.title = title;
        alert.fields = fields;
        data.push(alert);
    }

    return data;
}]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_ux_data_broker_transform&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2024-05-29 17:32:20&lt;/sys_created_on&gt;&lt;sys_id&gt;5f32a25c7122021024191a38e3b7e1bb&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;Community Alerts&lt;/sys_name&gt;&lt;sys_package display_value="My Template App" source="x_1434439_my_tem_0"&gt;7232625c53220210d9568cfbe92e8074&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="My Template App"&gt;7232625c53220210d9568cfbe92e8074&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ux_data_broker_transform_5f32a25c7122021024191a38e3b7e1bb&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2024-05-29 17:32:20&lt;/sys_updated_on&gt;&lt;/sys_ux_data_broker_transform&gt;&lt;/record_update&gt;</payload>
        <payload_hash>1398863559</payload_hash>
        <record_name>Community Alerts</record_name>
        <reverted_from/>
        <source>063bd400c3320210b6e3d8ec050131bb</source>
        <source_table>sys_upgrade_history</source_table>
        <state>previous</state>
        <sys_created_by/>
        <sys_created_on>2024-06-09 23:19:16</sys_created_on>
        <sys_id>f742d68ec3324210b6e3d8ec050131c5</sys_id>
        <sys_mod_count/>
        <sys_recorded_at>18fff4c85200000000</sys_recorded_at>
        <sys_updated_by/>
        <sys_updated_on/>
        <type>Data Broker Server Script</type>
        <update_guid>b742d68e07324210f1ff2eef51eb3ec5</update_guid>
        <update_guid_history>b742d68e07324210f1ff2eef51eb3ec5:1398863559</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-06-16 13:07:26</sys_created_on>
        <sys_db_object display_value="" name="sys_ux_data_broker_transform">sys_ux_data_broker_transform</sys_db_object>
        <sys_id>548ee9f0d2584604a1b36996f21bd7f9</sys_id>
        <sys_metadata>5f32a25c7122021024191a38e3b7e1bb</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Community Alerts</sys_name>
        <sys_package display_value="My Template App" source="x_1434439_my_tem_0">7232625c53220210d9568cfbe92e8074</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="My Template App">7232625c53220210d9568cfbe92e8074</sys_scope>
        <sys_scope_delete display_value="My Template App">5e0e65b46569442e9dfc948decdaf579</sys_scope_delete>
        <sys_update_name>sys_ux_data_broker_transform_5f32a25c7122021024191a38e3b7e1bb</sys_update_name>
        <sys_update_version display_value="sys_ux_data_broker_transform_5f32a25c7122021024191a38e3b7e1bb">f742d68ec3324210b6e3d8ec050131c5</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-06-16 13:07:26</sys_updated_on>
    </sys_metadata_delete>
</record_update>
